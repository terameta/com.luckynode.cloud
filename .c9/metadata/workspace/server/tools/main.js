{"filter":false,"title":"main.js","tooltip":"/server/tools/main.js","undoManager":{"mark":16,"position":16,"stack":[[{"start":{"row":0,"column":0},"end":{"row":25,"column":2},"action":"insert","lines":["// Global Functions","checkToken = function(req, res, next) {","\tvar token = req.body.token || req.query.token || req.headers['x-access-token'];","\tif (token) {","\t\tjwt.verify(token, app.get('jwtsecret'), function(err, decoded) {","\t\t\tif (err) {","\t\t\t\treturn res.json({","\t\t\t\t\tstatus: 'fail',","\t\t\t\t\tmessage: 'Failed to authenticate token.'","\t\t\t\t});","\t\t\t}","\t\t\telse {","\t\t\t\treq.decoded = decoded;","\t\t\t\tnext();","\t\t\t}","\t\t});","","\t}","\telse {","\t\treturn res.status(401).send({","\t\t\tsuccess: false,","\t\t\tmessage: 'No token provided.'","\t\t});","","\t}","};"],"id":1}],[{"start":{"row":4,"column":20},"end":{"row":4,"column":40},"action":"remove","lines":["app.get('jwtsecret')"],"id":2},{"start":{"row":4,"column":20},"end":{"row":4,"column":21},"action":"insert","lines":["c"]}],[{"start":{"row":4,"column":21},"end":{"row":4,"column":22},"action":"insert","lines":["o"],"id":3}],[{"start":{"row":4,"column":22},"end":{"row":4,"column":23},"action":"insert","lines":["n"],"id":4}],[{"start":{"row":4,"column":23},"end":{"row":4,"column":24},"action":"insert","lines":["f"],"id":5}],[{"start":{"row":4,"column":24},"end":{"row":4,"column":25},"action":"insert","lines":["i"],"id":6}],[{"start":{"row":4,"column":25},"end":{"row":4,"column":26},"action":"insert","lines":["i"],"id":7}],[{"start":{"row":4,"column":26},"end":{"row":4,"column":27},"action":"insert","lines":["g"],"id":8}],[{"start":{"row":4,"column":26},"end":{"row":4,"column":27},"action":"remove","lines":["g"],"id":9}],[{"start":{"row":4,"column":25},"end":{"row":4,"column":26},"action":"remove","lines":["i"],"id":10}],[{"start":{"row":4,"column":25},"end":{"row":4,"column":26},"action":"insert","lines":["g"],"id":11}],[{"start":{"row":4,"column":26},"end":{"row":4,"column":27},"action":"insert","lines":["."],"id":12}],[{"start":{"row":4,"column":27},"end":{"row":4,"column":28},"action":"insert","lines":["s"],"id":13}],[{"start":{"row":4,"column":28},"end":{"row":4,"column":29},"action":"insert","lines":["e"],"id":14}],[{"start":{"row":4,"column":29},"end":{"row":4,"column":30},"action":"insert","lines":["c"],"id":15}],[{"start":{"row":4,"column":30},"end":{"row":4,"column":31},"action":"insert","lines":["r"],"id":16}],[{"start":{"row":4,"column":27},"end":{"row":4,"column":31},"action":"remove","lines":["secr"],"id":17},{"start":{"row":4,"column":27},"end":{"row":4,"column":33},"action":"insert","lines":["secret"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":4,"column":33},"end":{"row":4,"column":33},"isBackwards":false},"options":{"tabSize":4,"useSoftTabs":false,"guessTabSize":false,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":9,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1433274283825,"hash":"36712c9a88c0c3be1ae996e2d25821545d4900df"}