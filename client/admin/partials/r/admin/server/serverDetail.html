<section class="content-header">
	<h1>
		<i class="fa fa-server fa-fw"></i> Server
		<small>{{ curServer.name }}</small>
	</h1>
	<ol class="breadcrumb">
		<li><a ui-sref="r.dashboard"><i class="fa fa-home"></i> Dashboard</a></li>
		<li><a ui-sref="r.dashboard.servers">Servers</a></li>
		<li class="active">Server</li>
	</ol>
</section>

<section class="content">
	<div class="row">
		<div class="col-xs-12 col-sm-12 col-md-12">
			<uib-tabset>
				<uib-tab index="0" heading="Main Information">
					<div ng-include="'/admin/partials/r/admin/server/serverMainInformation.html'"></div>
				</uib-tab>
				<uib-tab index="1" heading="Console" select="consoleTabSelected()" deselect="consoleTabDeselected()">
					<div ng-include="'/admin/partials/r/admin/server/serverConsole.html'"></div>
				</uib-tab>
			</uib-tabset>
		</div>
	</div>
</section>

<!--

<div class="col-xs-6">
	<div class="panel panel-default">
		<div class="panel-heading">
			<h3 class="panel-title">Actions</h3>
		</div>
		<div class="panel-body">
			<div class="btn-group">
				<button class="btn btn-default" ng-disabled="!(curServer.domstate=='running')" ng-click="toggleConsole()"><i class="fa fa-desktop"></i><br />Console</button>
				<button class="btn btn-default" ng-disabled="!(curServer.domstate=='shut off')" ng-click="serverConverged('start');"><i class="fa fa-play"></i><br />Boot</button>
				<button class="btn btn-default" ng-disabled="!(curServer.domstate=='running')" ng-click="serverConverged('shutdown');"><i class="fa fa-stop"></i><br />Shutdown</button>
				<button class="btn btn-default" ng-disabled="!(curServer.domstate=='running')" ng-click="serverConverged('reboot');"><i class="fa fa-repeat"></i><br />Reboot</button>
				<button class="btn btn-default" ng-disabled="!(curServer.domstate=='running')" ng-click="serverConverged('poweroff');"><i class="fa fa-plug"></i><br />Power Off</button>
			</div>
		</div>
	</div>
</div>
<div class="col-xs-6">
	<div class="panel panel-default">
		<div class="panel-heading">
			<h3 class="panel-title">Disks</h3>
		</div>
		<div class="panel-body">
			<div class="table-responsive">
				<table class="table table-bordered table-condensed table-hover table-striped table-nonfluid">
					<thead>
						<tr>
							<th>Type</th>
							<th>Assigned Drive</th>
							<th>Source File</th>
							<th>Store</th>
							<th>Action</th>
						</tr>
					</thead>
					<tr ng-repeat="curDisk in curServer.diskList">
						<td>{{curDisk.Device}}</td>
						<td>{{curDisk.Target}}</td>
						<td>
							<span ng-if="(curDisk.Device=='disk')">Assigned Drive</span>
							<span ng-if="(curDisk.Device!='disk')">{{curDisk.Source.split('/')[curDisk.Source.split('/').length-1]}}</span>
						</td>
						<td>{{curDisk.Store}}</td>
						<td>
							<button type="button" class="btn btn-default btn-xs" ng-if="(curDisk.Device=='disk')" 								ng-click="diskResize(curDisk)"><i class="fa fa-expand fa-fw" title="Resize Disk"></i></button>
							<button type="button" class="btn btn-default btn-xs" ng-if="(curDisk.Source == '-' && curDisk.Device == 'cdrom')" 	ng-click="openAttachISOModal(curDisk.Target)"><i class="fa fa-paperclip fa-fw" title="Attach Disk"></i></button>
							<button type="button" class="btn btn-default btn-xs" ng-if="(curDisk.Source != '-' && curDisk.Device == 'cdrom')" 	ng-click="ejectISO(curDisk.Target)"><i class="fa fa-eject fa-fw" title="Eject Disk"></i></button>
						</td>
					</tr>
				</table>
			</div>
		</div>
	</div>
</div>
<div class="col-xs-6">
	<div class="panel panel-default">
		<div class="panel-heading">
			<h3 class="panel-title">Details</h3>
		</div>
		<div class="panel-body">
			<pre>{{ curServer | json }}</pre>
		</div>
	</div>
</div>

</div>
</section>
-->
<script type="text/ng-template" id="serverAttachIsoModal.tmpl.html">
	<div class="modal-header">
		<h3><i class="fa fa-server fa-fw"></i> Attach ISO File to Server</h3>
	</div>
	<form>
		<div class="modal-body">
			<div ng-if="(curNode.interfaces == 'Failed')"><span class="alert alert-danger">Failed to fetch interfaces, please try again.</span></div>
			<table ng-if="(curNode.interfaces != 'Failed')" class="table table-hover table-condensed table-responsive">
				<thead>
					<tr><th>Name</th><th>File Name</th><th>Action</th><!--th>Details</th--></tr>
				</thead>
				<tbody>
					<tr ng-repeat="curServerIso in curServerAvailableISOList">

						<td>{{curServerIso.name}}</td>
						<td>{{curServerIso.file}}</td>
						<td>
							<button type="button" class="btn btn-primary btn-xs" ng-click="attachISO(curServerIso)">Attach</button>
						</td>
						<!--td>{{curServerIso}}</td-->
					</tr>
				</tbody>
			</table>
		</div>
	</form>
	<div class="modal-footer">
		<button type="button" class="btn btn-default" ng-click="closeAttachISOModal()" data-dismiss="modal">OK</button>
	</div>
</script>